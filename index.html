<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="shortcut icon"
      href="/assets/compiled/svg/favicon.svg"
      type="image/x-icon"
    />
    <link
      rel="shortcut icon"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAiCAYAAADRcLDBAAAEs2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjMzIgogICBleGlmOlBpeGVsWURpbWVuc2lvbj0iMzQiCiAgIGV4aWY6Q29sb3JTcGFjZT0iMSIKICAgdGlmZjpJbWFnZVdpZHRoPSIzMyIKICAgdGlmZjpJbWFnZUxlbmd0aD0iMzQiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249Ijk2LjAiCiAgIHRpZmY6WVJlc29sdXRpb249Ijk2LjAiCiAgIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiCiAgIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjItMDMtMzFUMTA6NTA6MjMrMDI6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDMtMzFUMTA6NTA6MjMrMDI6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMS4xMC4xIgogICAgICBzdEV2dDp3aGVuPSIyMDIyLTAzLTMxVDEwOjUwOjIzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9InIiPz5V57uAAAABgmlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAKJF1kc8rRFEUxz9maORHo1hYKC9hISNGTWwsRn4VFmOUX5uZZ36oeTOv954kW2WrKLHxa8FfwFZZK0WkZClrYoOe87ypmWTO7dzzud97z+nec8ETzaiaWd4NWtYyIiNhZWZ2TvE946WZSjqoj6mmPjE1HKWkfdxR5sSbgFOr9Ll/rXoxYapQVik8oOqGJTwqPL5i6Q5vCzeo6dii8KlwpyEXFL519LjLLw6nXP5y2IhGBsFTJ6ykijhexGra0ITl5bRqmWU1fx/nJTWJ7PSUxBbxJkwijBBGYYwhBgnRQ7/MIQIE6ZIVJfK7f/MnyUmuKrPOKgZLpEhj0SnqslRPSEyKnpCRYdXp/9++msneoFu9JgwVT7b91ga+LfjetO3PQ9v+PgLvI1xkC/m5A+h7F32zoLXug38dzi4LWnwHzjeg8UGPGbFfySvuSSbh9QRqZ6H+Gqrm3Z7l9zm+h+iafNUV7O5Bu5z3L/wAdthn7QIme0YAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAJTSURBVFiF7Zi9axRBGIefEw2IdxFBRQsLWUTBaywSK4ubdSGVIY1Y6HZql8ZKCGIqwX/AYLmCgVQKfiDn7jZeEQMWfsSAHAiKqPiB5mIgELWYOW5vzc3O7niHhT/YZvY37/swM/vOzJbIqVq9uQ04CYwCI8AhYAlYAB4Dc7HnrOSJWcoJcBS4ARzQ2F4BZ2LPmTeNuykHwEWgkQGAet9QfiMZjUSt3hwD7psGTWgs9pwH1hC1enMYeA7sKwDxBqjGnvNdZzKZjqmCAKh+U1kmEwi3IEBbIsugnY5avTkEtIAtFhBrQCX2nLVehqyRqFoCAAwBh3WGLAhbgCRIYYinwLolwLqKUwwi9pxV4KUlxKKKUwxC6ZElRCPLYAJxGfhSEOCz6m8HEXvOB2CyIMSk6m8HoXQTmMkJcA2YNTHm3congOvATo3tE3A29pxbpnFzQSiQPcB55IFmFNgFfEQeahaAGZMpsIJIAZWAHcDX2HN+2cT6r39GxmvC9aPNwH5gO1BOPFuBVWAZue0vA9+A12EgjPadnhCuH1WAE8ivYAQ4ohKaagV4gvxi5oG7YSA2vApsCOH60WngKrA3R9IsvQUuhIGY00K4flQG7gHH/mLytB4C42EgfrQb0mV7us8AAMeBS8mGNMR4nwHamtBB7B4QRNdaS0M8GxDEog7iyoAguvJ0QYSBuAOcAt71Kfl7wA8DcTvZ2KtOlJEr+ByyQtqqhTyHTIeB+ONeqi3brh+VgIN0fohUgWGggizZFTplu12yW8iy/YLOGWMpDMTPXnl+Az9vj2HERYqPAAAAAElFTkSuQmCC"
      type="image/png"
    />

    <link rel="stylesheet" href="/assets/compiled/css/app.css" />
    <link rel="stylesheet" href="/assets/compiled/css/app-dark.css" />
    <link rel="stylesheet" href="/assets/compiled/css/iconly.css" />

    <link rel="stylesheet" href="/assets/compiled/css/style.css" />

    <!-- <link
      rel="stylesheet"
      href="/assets/extensions/simple-datatables/style.css"
    />
    <link rel="stylesheet" href="/assets/compiled/css/table-datatable.css" /> -->

    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css"
    />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    />

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: #ffffff;
        color: #333333;
      }

      h3,
      p,
      label,
      h5,
      h6,
      h4,
      p {
        color: #333333;
      }

      span {
        color: #8c98a4;
      }

      .card {
        box-shadow: 3px 3px 3px 3px #dde8f1;
      }

      .map-container {
        position: relative;
        z-index: 999;
      }

      .navbar {
        position: fixed;
        width: 100%;
        background-color: #132144;
        z-index: 1000;
        padding: 10px 0;
      }

      .navbar-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        padding: 0 20px;
        box-sizing: border-box;
      }

      .navbar-logo {
        height: 50px;
      }

      .navbar-list {
        list-style-type: none;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-grow: 1;
      }

      .navbar-item {
        position: relative;
      }

      .navbar-link {
        display: block;
        color: white;
        text-align: right;
        padding: 14px 20px;
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .navbar-item.active .navbar-link {
        border-bottom: 2px solid #fbcb1f;
      }

      .navbar-link:hover {
        color: #fbcb1f;
      }

      .navbar-link::before {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: 0;
        left: 0;
        background-color: #fbcb1f;
        visibility: hidden;
        transition: all 0.3s ease-in-out;
      }

      .navbar-link:hover::before {
        visibility: visible;
        width: 100%;
      }

      /* Dropdown menu styling */
      .dropdown-menu {
        display: none;
        position: absolute;
        background-color: #ffffff;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        top: 100%;
        left: 0;
        color: #333333;
      }

      .dropdown-item {
        width: 100%;
      }

      .dropdown-link:active {
        color: #dde8f1;
      }

      .dropdown-link {
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        text-align: left;
        transition: background-color 0.3s ease, color 0.3s ease;
        color: #333333;
      }

      .dropdown-link:hover {
        background-color: #dde8f1;
        border-radius: 8px;
      }

      .dropdown-item.active .dropdown-link {
        color: #377dff;
        cursor: default; /* Prevents the pointer (hand) cursor */
      }

      .dropdown-item.active .dropdown-link:hover {
        background-color: transparent;
      }

      /* Show the dropdown menu on hover */
      .navbar-item.dropdown:hover .dropdown-menu {
        display: block;
      }

      /* New styles for responsive navbar */
      .hamburger {
        display: none;
        font-size: 24px;
        color: white;
        cursor: pointer;
      }

      @media (max-width: 576px) {
        .navbar {
          font-size: 0.775rem;
        }
        .navbar-list {
          display: none;
          flex-direction: column;
          width: 100%;
          text-align: left;
          padding-left: 20px; /* Add padding to align to the left */
          align-items: flex-start; /* Align items to the left */
          position: absolute;
          top: 50px;
          left: 0;
          background-color: #132144;
          z-index: 999;
        }

        .navbar-list.active {
          display: flex;
          margin-top: 10px;
        }

        .navbar-item {
          width: 100%;
        }

        .hamburger {
          display: block;
          position: absolute;
          top: 10px;
          right: 20px;
          z-index: 1001; /* Ensure it's above other content */
        }
        .map-container {
          position: relative;
          z-index: 999;
        }

        .card {
          position: relative;
        }

        .has-sub .dropdown-menu {
          display: none;
          position: static;
          top: auto;
          left: auto;
          background-color: transparent;
          box-shadow: none;
          color: #ffe5e5;
        }

        .has-sub.active .dropdown-menu {
          display: block;
          margin-top: 0.5rem; /* Adjust spacing between items */
          color: white;
        }

        .dropdown-item {
          padding: 0.5rem 2rem;
          /* background-color: #333; */
          background-color: #132144;

          border-bottom: 1px solid #555;
        }

        .dropdown-item:last-child {
          border-bottom: none; /* Remove border on last item */
        }

        .dataTable-custom {
          font-size: 0.775rem;
        }

        .timeline-content h4 {
          font-size: 1rem; /* Adjust this value as needed */
        }

        .timeline-content p,
        .timeline-content span {
          font-size: 0.875rem; /* Adjust this value as needed */
        }

        .dataTables_wrapper .dataTables_info, .dataTables_paginate, .dataTables_length, .dataTables_length select, .dataTables_filter input {
        font-size: 12px !important;
        
      }
      .legend {
        font-size: 12px !important; /* Smaller font size for small screens */
        padding: 5px !important;
      }

      .legend-container .legend-item h6 {
        font-size: 12px !important; /* Smaller font size for small screens */
        gap: 5px !important;
       
      }
      .legend-color {
        width: 10px !important;
        height: 10px !important;
        border-radius: 50% !important;
        margin-right: 5px !important;
      }
      .legend h4 {
        font-size: 16px !important; 

  
      }
    }

      /* Map container with default height */
      #map {
        /* width: 100%; */
        height: 600px; /* Default height */
      }

      /* Responsive height adjustments */
      @media (max-width: 576px) {
        #map {
          height: 400px; /* Adjust height for smaller screens */
        }
      }

      @media (min-width: 601px) and (max-width: 992px) {
        #map {
          height: 500px; /* Adjust height for medium screens */
        }
      }

      .legend {
        font-family: Arial, sans-serif;
        background: white;
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        font-size: medium;
      }

      .legend-item {
        display: flex;
        align-items: center;
        margin: 0;
        padding: 0;
      }

      .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        margin-right: 10px;
      }

      .legend-container {
        flex-wrap: wrap;
        align-items: center;
        margin: 0;
        padding: 0;
        
      }
      

      .leaflet-tooltip.custom-tooltip {
        background-color: #002845;
        color: white;
        border-radius: 5px;
        padding: 10px;
      }

      .timeline {
        position: relative;
        margin: 0 auto;
        width: 100%;
        max-width: 900px;
      }


      .timeline::before {
        content: "";
        position: absolute;
        top: 0;
        transform: translateX(-50%);
        border-style: dotted;
        border-width: 3px;
        height: 100%;
        background: #ccc;
      }

      .timeline-red,
      .timeline-grey,
      .timeline-yellow,
      .timeline-green {
        position: relative;
        margin: 20px 0;
        clear: both;
      }

     
      .timeline-red::before {
        background: #007bff;
      }
      .timeline-grey::before {
        background: #c9d9e9;
      }
      .timeline-yellow::before {
        background: #ff8533;
      }
      .timeline-green::before {
        background: #00e525;
      }

      .timeline-red::before, .timeline-grey::before, .timeline-yellow::before, .timeline-green::before  {
        content: "";
        position: absolute;
        top: 0;
        transform: translateX(-50%);
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 4px solid white;
        z-index: 1;
      }


      .timeline-content {
        padding: 20px;
        border-radius: 5px;
      }

      .circle {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 8px;
      }

      .red-circle {
        background-color: red;
      }

      .yellow-circle {
        background-color: yellow;
      }

      .blue-circle {
        background-color: blue;
      }

      .badge-warning {
        border: 1px solid rgba(255, 142, 66, 1);
        border-radius: 5px;
        background-color: #fff0e5;
        color: #ff8e42;
        font: 400 16px;
        margin-top: 3px;
      }

      .badge-danger {
        border-radius: 5px;
        border: 1px solid rgba(255, 66, 66, 1);
        background-color: #ffe5e5;
        color: #ff4242;
        font: 400 16px;
        margin-top: 3px;
      }

      .badge-primary {
        border-radius: 5px;
        border: 1px solid #377dff;
        background-color: #ffe5e5;
        color: #377dff;
        font: 400 16px;
        margin-top: 3px;
      }

      /* Custom dataTables */

      .dataTable-custom td,
      .dataTable-custom th {
        color: #333333; /* Custom font color for table cells */
      }

      .dataTable-custom thead {
        background-color: #dde8f1;
        border-radius: 10px;
      }

      .dataTables_wrapper .dataTables_filter input, .dataTables_length select {
      color: #000000 !important;
      background-color: #ffffff !important;
      border: 1px solid #ccc !important;
      padding: 5px !important;
      border-radius: 3px !important;
     
    }

      /* .table-responsive {
        overflow-x: auto;
      } */

      .dataTable-custom {
        width: 100%;
        border-collapse: collapse;
      }

      .dataTable-custom th,
      .dataTable-custom td {
        padding: 8px;
        border: 1px solid #ddd;
        color: #333333;
      }

      .dataTable-custom th {
        background-color: #dde8f1;
      }

      .dataTables_wrapper .dataTables_info, .dataTables_paginate, .dataTables_length, .dataTables_length select, .dataTables_filter input {
        font-size: 14px !important;
      }
     
    </style>
  </head>

  <body>
    <script src="/assets/static/js/initTheme.js"></script>
    <div id="app">
      <div id="main" class="layout-horizontal">
        <nav class="navbar">
          <div class="navbar-content">
            <a href="/index.html" class="menu-link">
              <img
                class="navbar-logo"
                src="/assets/compiled/svg/logoATR.svg"
                alt="Logo"
                height="46"
                width="135"
              />
            </a>
            <div class="hamburger" onclick="toggleMenu()">☰</div>

            <ul class="navbar-list gap-4">
              <li class="navbar-item active">
                <a href="/index.html" class="navbar-link"
                  ><i class="me-2"
                    ><img
                      src="/assets/compiled/svg/iconDashboard.svg"
                      alt=""
                      height="20"
                      width="20" /></i
                  >Dashboard</a
                >
              </li>
              <li class="navbar-item">
                <a href="/pages/master/kiosk.html" class="navbar-link"
                  ><i class="me-2"
                    ><img
                      src="/assets/compiled/svg/iconMaster.svg"
                      alt=""
                      height="20"
                      width="20" /></i
                  >Master</a
                >
              </li>
              <li class="navbar-item dropdown">
                <a href="#" class="navbar-link" id="report-link"
                  ><i class="me-2"
                    ><img
                      src="/assets/compiled/svg/iconReport.svg"
                      alt=""
                      height="20"
                      width="20" /></i
                  >Report</a
                >
                <ul class="dropdown-menu">
                  <li class="dropdown-item">
                    <a href="/pages/master/errorLog.html" class="dropdown-link"
                      >Error Log</a
                    >
                  </li>
                  <li class="dropdown-item">
                    <a
                      href="/pages/master/transaksi.html"
                      class="dropdown-link"
                    >
                      Transaksi</a
                    >
                  </li>
                  <li class="dropdown-item">
                    <a
                      href="/pages/master/kertasToner.html"
                      class="dropdown-link"
                    >
                      Kertas & Toner</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>

        <div class="map-container" style="margin-top: 70px">
          <div id="map"></div>

          <table id="kioskTable" style="display: none">
            <thead>
              <tr>
                <th>Latitude</th>
                <th>Longitude</th>
                <th>Location</th>
                <th>Status</th>
                <th>Datetime</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>-6.2088</td>
                <td>106.8456</td>
                <td>Jakarta</td>
                <td>Server Error</td>
                <td>2024-06-12T19:44:00+07:00</td>
              </tr>
              <tr>
                <td>-7.7972</td>
                <td>110.3705</td>
                <td>Yogyakarta</td>
                <td>Kertas Hampir Habis</td>
                <td>2024-06-12T18:00:00+07:00</td>
              </tr>
              <tr>
                <td>-8.3405</td>
                <td>115.0920</td>
                <td>Bali</td>
                <td>Normal</td>
                <td>2024-06-11T18:00:00+07:00</td>
              </tr>
              <tr>
                <td>-0.8990</td>
                <td>100.3543</td>
                <td>Padang</td>
                <td>Server Error</td>
                <td>2024-05-12T18:00:00+07:00</td>
              </tr>
              <tr>
                <td>-2.9814</td>
                <td>104.7642</td>
                <td>Palembang</td>
                <td>Server Error</td>
                <td>2023-06-12T18:00:00+07:00</td>
              </tr>
              <tr>
                <td>-3.6557</td>
                <td>128.1900</td>
                <td>Ambon</td>
                <td>Server Error</td>
                <td>2023-06-12T18:00:00+07:00</td>
              </tr>
              <tr>
                <td>-5.1477</td>
                <td>119.4327</td>
                <td>Makassar</td>
                <td>Blanko Sertifikat Habis</td>
                <td>2023-06-12T18:00:00+07:00</td>
              </tr>
              <tr>
                <td>3.5952</td>
                <td>98.6722</td>
                <td>Medan</td>
                <td>Blanko Sertifikat Habis</td>
                <td>2023-06-12T18:00:00+07:00</td>
              </tr>
              <tr>
                <td>1.4558</td>
                <td>124.8486</td>
                <td>Manado</td>
                <td>Printer Tidak Terdeteksi</td>
                <td>2023-06-12T18:00:00+07:00</td>
              </tr>
              <tr>
                <td>-0.7893</td>
                <td>113.9213</td>
                <td>Central Kalimantan</td>
                <td>Printer Tidak Terdeteksi</td>
                <td>2023-06-12T18:00:00+07:00</td>
              </tr>
              <!-- Add more rows as needed -->
            </tbody>
          </table>
        </div>

        <div class="row justify-content-center">
          <div class="col-12 mt-5 px-5">
            <!-- <section class="section" style="align-self: center;"> -->
            <div class="card border">
              <div class="card-header"></div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="dislay dataTable-custom" id="table1">
                    <thead>
                      <tr>
                        <th>Status Error</th>
                        <th>Nomor Kiosk</th>
                        <th>Lokasi</th>
                        <th>Waktu Error</th>
                        <th>Status Pengerjaan</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Server Error</td>
                        <td>K2300012</td>
                        <td>
                          Kantor Pertanahan Kota Administratif Jakarta Pusat
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Blanko Sertifikat Habis</td>
                        <td>K2300013</td>
                        <td>Kantor Pertanahan Kota Surabaya I</td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Antrian</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Printer Tidak Terdeteksi</td>
                        <td>K2300014</td>
                        <td>Kantor Pertanahan Kota Surabaya II</td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Kertas Hampir Habis</td>
                        <td>K2300015</td>
                        <td>
                          Kantor Wilayah Badan Pertanahan Nasional Provinsi
                          Kalimantan Timur
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Toner Hampir Habis</td>
                        <td>K2300016</td>
                        <td>
                          Kantor Wilayah Badan Pertanahan Nasional Provinsi
                          Kalimantan Timur
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Antrian</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Server Error</td>
                        <td>K2300012</td>
                        <td>
                          Kantor Pertanahan Kota Administratif Jakarta Pusat
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Blanko Sertifikat Habis</td>
                        <td>K2300013</td>
                        <td>Kantor Pertanahan Kota Surabaya I</td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Antrian</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Printer Tidak Terdeteksi</td>
                        <td>K2300014</td>
                        <td>Kantor Pertanahan Kota Surabaya II</td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Kertas Hampir Habis</td>
                        <td>K2300015</td>
                        <td>
                          Kantor Wilayah Badan Pertanahan Nasional Provinsi
                          Kalimantan Timur
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Toner Hampir Habis</td>
                        <td>K2300016</td>
                        <td>
                          Kantor Wilayah Badan Pertanahan Nasional Provinsi
                          Kalimantan Timur
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Antrian</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Server Error</td>
                        <td>K2300012</td>
                        <td>
                          Kantor Pertanahan Kota Administratif Jakarta Pusat
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Blanko Sertifikat Habis</td>
                        <td>K2300013</td>
                        <td>Kantor Pertanahan Kota Surabaya I</td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Antrian</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Printer Tidak Terdeteksi</td>
                        <td>K2300014</td>
                        <td>Kantor Pertanahan Kota Surabaya II</td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Kertas Hampir Habis</td>
                        <td>K2300015</td>
                        <td>
                          Kantor Wilayah Badan Pertanahan Nasional Provinsi
                          Kalimantan Timur
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Perbaikan</td>
                        <td class="details-cell"></td>
                      </tr>
                      <tr>
                        <td>Toner Hampir Habis</td>
                        <td>K2300016</td>
                        <td>
                          Kantor Wilayah Badan Pertanahan Nasional Provinsi
                          Kalimantan Timur
                        </td>
                        <td>20 Maret 2024</td>
                        <td class="badge">Dalam Antrian</td>
                        <td class="details-cell"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="offcanvas offcanvas-end"
          tabindex="-1"
          id="offcanvasRight"
          aria-labelledby="offcanvasRightLabel"
        >
          <div class="offcanvas-header">
            <h5 id="offcanvasRightLabel">K2300012</h5>
            <button
              type="button"
              class="btn-close text-reset"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>

          <div class="offcanvas-body">
            <div class="container">
              <div class="timeline">
                <div class="timeline-red">
                  <div class="timeline-content">
                    <h4>Server Error</h4>
                    <p>
                      Sistem mendeteksi adanya “Server Error” pada Kiosk.
                      Pemberitahuan otomatis telah dikirim ke tim teknis untuk
                      penanganan lebih lanjut
                    </p>

                    <span class="text-muted">15.00 WIB | 24 Maret 2024</span>
                  </div>
                </div>
                <div class="timeline-grey">
                  <div class="timeline-content">
                    <h4>Pemberitahuan Diterima oleh Tim Teknis</h4>
                    <p>
                      Tim Teknis telah menerima pemberitahuan dan akan melakukan
                      penanganan.
                    </p>

                    <span class="text-muted">15.00 WIB | 24 Maret 2024</span>
                  </div>
                </div>
                <div class="timeline-yellow">
                  <div class="timeline-content">
                    <h4
                      class="text-white"
                      style="background-color: #ff8533; border-radius: 5px"
                    >
                      Dalam Perbaikan
                    </h4>
                    <p>Status pengerjaan diperbarui.</p>

                    <span class="text-muted">15.00 WIB | 24 Maret 2024</span>
                  </div>
                </div>
                <div class="timeline-green">
                  <div class="timeline-content">
                    <h4>Perbaikan Selesai</h4>
                    <p>
                      Perbaikan telah selesai. Kiosk telah dapat digunakan
                      dengan normal.
                    </p>

                    <span class="text-muted">15.00 WIB | 24 Maret 2024</span>
                  </div>
                </div>
                <!-- Add more timeline items as needed -->
              </div>
              ...
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/assets/static/js/components/dark.js"></script>
    <script src="/assets/extensions/perfect-scrollbar/perfect-scrollbar.min.js"></script>

    <script src="/assets/static/js/pages/horizontal-layout.js"></script>
    <script src="/assets/compiled/js/app.js"></script>

    <!-- <script src="/assets/static/js/pages/dashboard.js"></script> -->

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <script>
      // document.addEventListener("DOMContentLoaded", function () {
      // const navbarItems = document.querySelectorAll(".navbar-item");
      // const dropdownLink = document.getElementById("report-link");
      // const dropdownMenu = dropdownLink.nextElementSibling;

      // dropdownLink.addEventListener("click", function (event) {
      //   event.preventDefault();
      //   dropdownMenu.classList.toggle("show");
      //   dropdownLink.parentElement.classList.toggle("active");
      // });

      // navbarItems.forEach((item) => {
      //   item.addEventListener("click", function () {
      //     navbarItems.forEach((nav) => nav.classList.remove("active"));
      //     if (this.querySelector(".dropdown-menu")) {
      //       this.classList.add("active");
      //     } else {
      //       this.classList.add("active");
      //       dropdownMenu.classList.remove("show");
      //     }
      //   });
      // });

      // document.addEventListener("click", function (event) {
      //   if (!event.target.closest(".navbar-item")) {
      //     navbarItems.forEach((nav) => nav.classList.remove("active"));
      //     dropdownMenu.classList.remove("show");
      //   }
      // });

      document.addEventListener("DOMContentLoaded", initDropdowns);
      window.addEventListener("resize", initDropdowns);

      function initDropdowns() {
        const dropdowns = document.querySelectorAll(".navbar-item.dropdown");

        dropdowns.forEach((dropdown) => {
          // Clear previous event listeners
          dropdown.replaceWith(dropdown.cloneNode(true));
        });

        const newDropdowns = document.querySelectorAll(".navbar-item.dropdown");

        if (window.innerWidth > 576) {
          newDropdowns.forEach((dropdown) => {
            dropdown.addEventListener("mouseenter", function () {
              this.classList.add("active");
            });
            dropdown.addEventListener("mouseleave", function () {
              this.classList.remove("active");
            });
          });
        } else {
          newDropdowns.forEach((dropdown) => {
            dropdown.classList.add("has-sub");
            const link = dropdown.querySelector(".navbar-link");
            link.addEventListener("click", function (e) {
              e.preventDefault();
              dropdown.classList.toggle("active");
            });
          });
        }
      }

      function toggleMenu() {
        var navbarList = document.querySelector(".navbar-list");
        var mapContainer = document.querySelector(".map-container");
        var card = document.querySelector(".card");

        navbarList.classList.toggle("active");

        if (navbarList.classList.contains("active")) {
          mapContainer.style.top = `${navbarList.clientHeight}px`;
          card.style.top = `${navbarList.clientHeight}px`;
        } else {
          mapContainer.style.top = "0";
          card.style.top = "0";
        }
      }

      $(document).ready(function () {
        // Initialize DataTable
        var table = $("#table1").DataTable();

        // Function to add status circles and work status logic
        function addStatusCirclesAndLogic() {
          $("#table1 tbody tr").each(function () {
            var statusText = $(this).find("td").eq(0).text().toLowerCase();
            var workStatusText = $(this).find("td").eq(4).text().toLowerCase();

            var statusCell = $(this).find("td").eq(0);
            var workStatusCell = $(this).find("td").eq(4);

            // Clear previous circles and badges
            statusCell.find(".circle").remove();
            workStatusCell.removeClass(
              "badge badge-warning badge-danger badge-primary"
            );

            var circleClass = "";
            var statusClass = "";

            if (
              statusText.includes("server error") ||
              statusText.includes("blanko sertifikat habis") ||
              statusText.includes("printer tidak terdeteksi")
            ) {
              circleClass = "red-circle";
            } else if (
              statusText.includes("kertas hampir habis") ||
              statusText.includes("toner hampir habis")
            ) {
              circleClass = "yellow-circle";
            } else if (statusText.includes("normal")) {
              circleClass = "blue-circle";
            }

            if (workStatusText.includes("dalam perbaikan")) {
              statusClass = "yellow-outline";
            } else if (workStatusText.includes("dalam antrian")) {
              statusClass = "red-outline";
            }

            if (workStatusText.includes("dalam perbaikan")) {
              statusClass = "badge badge-warning";
            } else if (workStatusText.includes("dalam antrian")) {
              statusClass = "badge badge-danger";
            } else if (workStatusText.includes("normal")) {
              statusClass = "badge badge-primary";
            }

            if (circleClass) {
              var circle = $("<span>").addClass("circle").addClass(circleClass);
              $(this).find("td").eq(0).prepend(circle);
            }

            // if (statusClass) {
            //   $(this).find("td").eq(4).addClass(statusClass);
            // }
            if (statusClass) {
              workStatusCell.html(
                '<div class="td-center"><span class="' +
                  statusClass +
                  '">' +
                  workStatusCell.text() +
                  "</span></div>"
              );
            }
          });
        }

        // Call the function to add status circles and logic
        addStatusCirclesAndLogic();

        // Re-apply the function every time the table is redrawn
        table.on("draw.dt", function () {
          addStatusCirclesAndLogic();
        });

        // Function to add dynamic "Details" link to each row
        function addDetailsLinks() {
          $("#table1 tbody tr").each(function () {
            var detailsLink = $("<a>")
              .attr({
                href: "#",
                "data-bs-toggle": "offcanvas",
                "data-bs-target": "#offcanvasRight",
                "aria-controls": "offcanvasRight",
              })
              .text("Details");

            // Append the dynamic "Details" link to the last cell in each row
            $(this).find(".details-cell").html(detailsLink);
          });
        }

        // Call the function to add dynamic "Details" links
        addDetailsLinks();

        table.on("draw.dt", function () {
          addDetailsLinks();
        });
      });

      // Initialize the map centered on Indonesia
      // var map = L.map("map").setView([-2.5, 118.0], 5); // Central coordinates of Indonesia

      // Initialize the map
      var map = L.map("map");

      // Add a tile layer
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      }).addTo(map);

      // Function to adjust map view based on screen size
      function setMapView() {
        if (window.innerWidth <= 576) {
          map.setView([-2.5489, 118.0149], 3); // Coordinates and zoom for small screens
        } else if (window.innerWidth <= 992) {
          map.setView([-2.5489, 118.0149], 4); // Coordinates and zoom for medium screens
        } else {
          map.setView([-2.5489, 118.0149], 5); // Coordinates and zoom for large screens
        }
      }

      // Initial call to set the correct size
      setMapView();

      // Adjust the map view on window resize
      window.addEventListener("resize", function () {
        setMapView();
        map.invalidateSize();
      });

      // Function to extract kiosk locations from the table
      function extractKioskLocationsFromTable() {
        var kioskLocations = [];
        var tableRows = document.querySelectorAll("#kioskTable tbody tr");
        tableRows.forEach(function (row) {
          var cells = row.querySelectorAll("td");
          var latitude = parseFloat(cells[0].textContent);
          var longitude = parseFloat(cells[1].textContent);
          var location = cells[2].textContent;
          var status = cells[3].textContent; // No need to lowercase
          var datetime = cells[4].textContent;
          kioskLocations.push({
            lat: latitude,
            lng: longitude,
            location: location,
            status: status,
            datetime: datetime,
          });
        });
        return kioskLocations;
      }

      // Function to calculate relative time from the current date in Indonesia West Time (WIB)
      function timeSince(date) {
        var localDate = new Date(new Date(date).getTime() + 7 * 3600 * 1000);
        var seconds = Math.floor((new Date() - localDate) / 1000);
        var interval = seconds / 31536000;

        if (interval > 1) {
          return Math.floor(interval) + " tahun lalu";
        }
        interval = seconds / 2592000;
        if (interval > 1) {
          return Math.floor(interval) + " bulan lalu";
        }
        interval = seconds / 86400;
        if (interval > 1) {
          return Math.floor(interval) + " hari lalu";
        }
        interval = seconds / 3600;
        if (interval > 1) {
          return Math.floor(interval) + " jam lalu";
        }
        interval = seconds / 60;
        if (interval > 1) {
          return Math.floor(interval) + " menit lalu";
        }
        return Math.floor(seconds) + " detik lalu";
      }

      function addKioskMarkers() {
        var kioskLocations = extractKioskLocationsFromTable();
        kioskLocations.forEach(function (kiosk) {
          var iconUrl;

          if (
            kiosk.status === "Server Error" ||
            kiosk.status === "Blanko Sertifikat Habis" ||
            kiosk.status === "Printer Tidak Terdeteksi"
          ) {
            iconUrl =
              "data:image/svg+xml;utf8," +
              encodeURIComponent(
                '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="red"><animate attributeName="r" from="8" to="12" dur="1s" repeatCount="indefinite" /><animate attributeName="opacity" from="1" to="0" dur="1s" repeatCount="indefinite" /></circle></svg>'
              );
          } else if (
            kiosk.status === "Kertas Hampir Habis" ||
            kiosk.status === "Toner Hampir Habis"
          ) {
            iconUrl =
              "data:image/svg+xml;utf8," +
              encodeURIComponent(
                '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="yellow"><animate attributeName="r" from="8" to="12" dur="1s" repeatCount="indefinite" /><animate attributeName="opacity" from="1" to="0" dur="1s" repeatCount="indefinite" /></circle></svg>'
              );
          } else {
            iconUrl =
              "data:image/svg+xml;utf8," +
              encodeURIComponent(
                '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="blue"></circle></svg>'
              );
          }

          var kioskIcon = L.icon({
            iconUrl: iconUrl,
            iconSize: [20, 20],
            iconAnchor: [10, 10], // Center the icon
          });

          var kioskMarker = L.marker([kiosk.lat, kiosk.lng], {
            icon: kioskIcon,
          }).addTo(map);

          var tooltipContent =
            "<div class='tooltip-content'>" +
            "<div class='popup-body'>" +
            "<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20' style='margin-right: 5px;'>" +
            "<circle cx='10' cy='10' r='8' fill='" +
            (kiosk.status === "Server Error" ||
            kiosk.status === "Blanko Sertifikat Habis" ||
            kiosk.status === "Printer Tidak Terdeteksi"
              ? "red"
              : kiosk.status === "Kertas Hampir Habis" ||
                kiosk.status === "Toner Hampir Habis"
              ? "yellow"
              : "blue") +
            "'></circle>" +
            "</svg>" +
            "<span class='status-icon'>" +
            kiosk.status +
            "</span>" +
            "</div>" + // Closing div for popup-header
            "<svg width='12' height='12' viewBox='0 0 12 13' fill='none' xmlns='http://www.w3.org/2000/svg' style='margin-right: 5px;'>" +
            "<path d='M6 1.625C4.13672 1.625 2.625 3.06383 2.625 4.83594C2.625 6.875 4.875 10.1063 5.70117 11.2224C5.73547 11.2695 5.78041 11.3079 5.83235 11.3343C5.88428 11.3607 5.94173 11.3745 6 11.3745C6.05827 11.3745 6.11572 11.3607 6.16765 11.3343C6.21959 11.3079 6.26453 11.2695 6.29883 11.2224C7.125 10.1068 9.375 6.87664 9.375 4.83594C9.375 3.06383 7.86328 1.625 6 1.625Z' stroke='white' stroke-linecap='round' stroke-linejoin='round'/>" +
            "<path d='M6 6.125C6.62132 6.125 7.125 5.62132 7.125 5C7.125 4.37868 6.62132 3.875 6 3.875C5.37868 3.875 4.875 4.37868 4.875 5C4.875 5.62132 5.37868 6.125 6 6.125Z' stroke='white' stroke-linecap='round' stroke-linejoin='round'/>" +
            "</svg>" +
            "<span class='location-text'>" +
            kiosk.location +
            "</span>" +
            "</div>" +
            "<hr />" +
            "<div class='popup-footer'>" +
            "<p class='since-time' style='margin: 0; text-align: end;'>" +
            timeSince(kiosk.datetime) +
            "</p>" +
            "</div>" +
            "</div>";

          kioskMarker.bindTooltip(tooltipContent, {
            direction: "right",
            className: "custom-tooltip",
          });

          // Open the tooltip on mouseover
          kioskMarker.on("mouseover", function (e) {
            this.openTooltip();
          });

          // Close the tooltip on mouseout
          kioskMarker.on("mouseout", function (e) {
            this.closeTooltip();
          });
        });
      }

      // Call the function to add markers when the page loads
      window.onload = addKioskMarkers;

      // Add legend to the map
      var legend = L.control({ position: "bottomleft" });

      legend.onAdd = function (map) {
        var div = L.DomUtil.create("div", "legend");
        var kioskLocations = extractKioskLocationsFromTable();

        function getTimeSinceStatus(statuses) {
          var kiosk = kioskLocations.find((eq) => statuses.includes(eq.status));
          return kiosk ? timeSince(kiosk.datetime) : "N/A";
        }

        var errorTime = getTimeSinceStatus([
          "Server Error",
          "Blanko Sertifikat Habis",
          "Printer Tidak Terdeteksi",
        ]);
        var maintenanceTime = getTimeSinceStatus([
          "Kertas Hampir Habis",
          "Toner Hampir Habis",
        ]);
        var normalTime = getTimeSinceStatus(["Normal"]);

        div.innerHTML = `
          <h4>Legend</h4>
          <div class="legend-container">
            <div class="legend-item">
              <span class="legend-color" style="background-color: red;"></span>
              <h6>Error</h6>
              <div class="tooltip">${errorTime}</div>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background-color: yellow;"></span>
              <h6>Maintenance</h6>
              <div class="tooltip">${maintenanceTime}</div>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background-color: blue;"></span>
              <h6>Normal</h6>
              <div class="tooltip">${normalTime}</div>
            </div>
          </div>`;
        return div;
      };

      legend.addTo(map);
    </script>

    <script src="assets/compiled/js/app.js"></script>
    <!-- <script src="/assets/extensions/simple-datatables/umd/simple-datatables.js"></script>
    <script src="/assets/static/js/pages/simple-datatables.js"></script> -->

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  </body>
</html>
