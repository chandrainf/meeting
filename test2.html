<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stylish Meeting Room</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
        }
        .video-container {
            background-color: #000;
            height: 70vh;
            position: relative;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 5px;
            padding: 5px;
        }
        .video-item {
            position: relative;
            background-color: #333;
        }
        .video-item video {
            width: 100%;
            height: 100%;
        }
        .video-item.active {
            border: 3px solid yellow;
        }
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 10vh;
            background-color: #f8f9fa;
            border-top: 1px solid #ddd;
        }
        .participant-list {
            height: 50vh;
            overflow-y: auto;
            border-right: 1px solid #ddd;
            padding: 10px;
        }
        .participant-card {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background-color: #f8f9fa;
        }
        .participant-card img {
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }
        .participant-card .participant-info {
            flex: 1;
        }
        .participant-card .participant-info .participant-name {
            font-weight: bold;
        }
        .participant-card .participant-info .participant-status {
            font-size: 0.9rem;
            color: #6c757d;
        }
        .chat-container {
            height: 20vh;
            overflow-y: auto;
            border-top: 1px solid #ddd;
            padding: 10px;
        }
        .chat-bubble {
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 15px;
            margin-bottom: 10px;
            max-width: 80%;
        }
        .chat-timestamp {
            font-size: 0.8rem;
            color: #6c757d;
        }
        .chat-input-container {
            display: flex;
            padding: 10px;
            background-color: #f8f9fa;
            border-top: 1px solid #ddd;
        }
        .chat-input-container input {
            flex: 1;
            margin-right: 10px;
        }
        .participant-list, .chat-container {
            background-color: #ffffff;
        }
        .main-container {
            display: flex;
            height: 100vh;
        }
        .sidebar {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .main-content {
            flex: 3;
            display: flex;
            flex-direction: column;
        }
        .header {
            background-color: #007bff;
            color: white;
            padding: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="main-container">
            <div class="sidebar">
                <div class="header">
                    Participants
                </div>
                <div class="participant-list" id="participantList">
                    <!-- Participant cards will be dynamically added here -->
                </div>
            </div>
            <div class="main-content">
                <div class="header">
                    Meeting Room
                </div>
                <div class="video-container" id="videoContainer">
                    <!-- Video items will be dynamically added here -->
                </div>
                <div class="controls">
                    <button id="prevButton" class="btn btn-secondary mx-2">Previous</button>
                    <button id="nextButton" class="btn btn-secondary mx-2">Next</button>
                    <button id="muteButton" class="btn btn-primary mx-2">Mute</button>
                    <button id="videoButton" class="btn btn-secondary mx-2">Video Off</button>
                    <button id="endCallButton" class="btn btn-danger mx-2">End Call</button>
                </div>
                <div class="chat-container" id="chatContainer">
                    <!-- Chat messages will be dynamically added here -->
                </div>
                <div class="chat-input-container">
                    <input type="text" id="chatInput" class="form-control" placeholder="Type a message...">
                    <button id="sendMessageButton" class="btn btn-primary">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // JavaScript to handle video and controls
        let isMuted = false;
        let isVideoOff = false;
        let currentPage = 0;

        document.getElementById('muteButton').addEventListener('click', () => {
            isMuted = !isMuted;
            document.querySelectorAll('.video-item video').forEach(video => {
                video.muted = isMuted;
            });
            document.getElementById('muteButton').textContent = isMuted ? 'Unmute' : 'Mute';
        });

        document.getElementById('videoButton').addEventListener('click', () => {
            isVideoOff = !isVideoOff;
            document.querySelectorAll('.video-item video').forEach(video => {
                video.style.display = isVideoOff ? 'none' : 'block';
            });
            document.getElementById('videoButton').textContent = isVideoOff ? 'Video On' : 'Video Off';
        });

        document.getElementById('endCallButton').addEventListener('click', () => {
            // Logic to end the call
            alert('Call Ended');
        });

        document.getElementById('prevButton').addEventListener('click', () => {
            if (currentPage > 0) {
                currentPage--;
                renderVideos();
            }
        });

        document.getElementById('nextButton').addEventListener('click', () => {
            if (currentPage < Math.ceil(participants.length / 16) - 1) {
                currentPage++;
                renderVideos();
            }
        });

        // Chat functionality
        document.getElementById('sendMessageButton').addEventListener('click', () => {
            const message = document.getElementById('chatInput').value;
            if (message.trim() !== '') {
                addChatMessage(message, 'You');
                document.getElementById('chatInput').value = '';
            }
        });

        document.getElementById('chatInput').addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                const message = document.getElementById('chatInput').value;
                if (message.trim() !== '') {
                    addChatMessage(message, 'You');
                    document.getElementById('chatInput').value = '';
                }
            }
        });

        function addChatMessage(message, sender) {
            const chatContainer = document.getElementById('chatContainer');
            const messageElement = document.createElement('div');
            messageElement.className = 'chat-bubble';

            const messageContent = document.createElement('div');
            messageContent.textContent = message;
            messageElement.appendChild(messageContent);

            const timestamp = document.createElement('div');
            timestamp.className = 'chat-timestamp';
            const now = new Date();
            timestamp.textContent = `${sender} at ${now.getHours()}:${now.getMinutes()}`;
            messageElement.appendChild(timestamp);

            chatContainer.appendChild(messageElement);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Manage participants
        const participants = [];
        let speakingParticipantIndex = null;

        function renderVideos() {
            const videoContainer = document.getElementById('videoContainer');
            videoContainer.innerHTML = '';

            const startIndex = currentPage * 16;
            const endIndex = Math.min(startIndex + 16, participants.length);

            for (let i = startIndex; i < endIndex; i++) {
                const participant = participants[i];
                const videoItem = document.createElement('div');
                videoItem.className = 'video-item';
                if (i === speakingParticipantIndex) {
                    videoItem.classList.add('active');
                }

                const videoElement = document.createElement('video');
                videoElement.src = 'https://via.placeholder.com/150';
                videoElement.autoplay = true;
                videoElement.muted = true;

                videoItem.appendChild(videoElement);
                videoContainer.appendChild(videoItem);
            }
        }

        // Simulate adding and removing participants dynamically
        setInterval(() => {
            const newParticipant = {
                name: `Participant ${participants.length + 1}`,
                avatar: 'https://via.placeholder.com/40',
                status: 'Joined the meeting'
            };
            participants.push(newParticipant);
            updateParticipantList();
            renderVideos();

            if (Math.random() < 0.2) {
                speakingParticipantIndex = Math.floor(Math.random() * participants.length);
                renderVideos();
            }
        }, 5000);

        function updateParticipantList() {
            const participantList = document.getElementById('participantList');
            participantList.innerHTML = '';

            participants.forEach(participant => {
                const participantCard = document.createElement('div');
                participantCard.className = 'participant-card';

                const participantImage = document.createElement('img');
                participantImage.src = participant.avatar;
                participantImage.alt = 'Participant';
                participantCard.appendChild(participantImage);

                const participantInfo = document.createElement('div');
                participantInfo.className = 'participant-info';
                participantCard.appendChild(participantInfo);

                const participantName = document.createElement('div');
                participantName.className = 'participant-name';
                participantName.textContent = participant.name;
                participantInfo.appendChild(participantName);

                const participantStatus = document.createElement('div');
                participantStatus.className = 'participant-status';
                participantStatus.textContent = participant.status;
                participantInfo.appendChild(participantStatus);

                participantList.appendChild(participantCard);
            });
        }
    </script>
</body>
</html>
