<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zoom-like Grid Layout</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      integrity="sha512-9X2j2vpx6DqU5nWVGyNlQyIzIRXi9vheHCzPM5s5ImMlKBQq2Km4NVO0JYp27R6rpG8esFmSAA/KnLepr3Unow=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="container-fluid">
      <button onclick="setLayout('first')">First Layout</button>
      <button onclick="setLayout('second')">Second Layout</button>
      <div id="card-container"></div>

      <div class="main-content"></div>
    </div>

    <script>
      const members = [
        {
          name: "Ruang Sidang",
          role: "Host, Me",
          mic: true,
          camera: true,
          details: false,
        },
        {
          name: "Andi Wijaya",
          role: "Co-Host",
          mic: true,
          camera: true,
          details: false,
        },
        {
          name: "Budi Santoso",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Siri Aminah",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Ahmad Firdaus",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Rina Kusuma",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Eko Prasetyo",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Sri Lestari",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Yudi Kurniawan",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Intan Permatasari",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Hendra Setiawan",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
        {
          name: "Triana Kurnita",
          role: "",
          mic: true,
          camera: false,
          details: false,
        },
      ];

      let currentPage = 0;
      let cardsPerPage = 0;
      let currentMessagePage = 0;
      let messageCardsPerPage = 0;
      let currentLayout = "first";

      function generateCard(member) {
        const card = document.createElement("div");
        card.classList.add("card");
        card.innerHTML = `
    <div class="card-body">
      <h5 class="card-title">${member.name}</h5>
      <p class="card-text">Role: ${member.role}</p>
    </div>
  `;
        return card;
      }

      function generateMessageCard(member) {
        const card = document.createElement("div");
        card.classList.add("message-card");
        card.innerHTML = `
    <div class="message-card-body">
      <h5 class="message-card-title">${member.name}</h5>
      <p class="message-card-text">Role: ${member.role}</p>
    </div>
  `;
        return card;
      }

      function setCardNumber(number) {
        cardsPerPage = number;
        currentPage = 0;
        updateGrid();
        updateNavigationButtons();
      }

      function setMessageCardNumber(number) {
        messageCardsPerPage = number;
        currentMessagePage = 0;
        updateMessagePane();
        updateMessageNavigationButtons();
      }

      function updateGrid() {
        const container = document.getElementById("card-container");
        container.innerHTML = "";

        const start = currentPage * cardsPerPage;
        const end = Math.min(start + cardsPerPage, members.length);

        members.slice(start, end).forEach((member) => {
          container.appendChild(generateCard(member));
        });

        adjustGridLayout(end - start);
      }

      function adjustGridLayout(number) {
        const container = document.getElementById("card-container");
        let cols, rows;

        switch (number) {
          case 6:
            cols = 3;
            rows = 2;
            break;
          case 9:
            cols = 3;
            rows = 3;
            break;
          case 12:
            cols = 4;
            rows = 3;
            break;
          case 16:
            cols = 4;
            rows = 4;
            break;
          default:
            cols = Math.ceil(Math.sqrt(number));
            rows = Math.ceil(number / cols);
        }

        container.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
        container.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
        updatePageIndicator();
      }

      function updateMessagePane() {
        const container = document.getElementById("card-container");
        container.innerHTML = "";

        const start = currentMessagePage * messageCardsPerPage;
        const end = Math.min(start + messageCardsPerPage, members.length);

        members.slice(start, end).forEach((member) => {
          container.appendChild(generateMessageCard(member));
        });

        adjustMessagePaneLayout(end - start);
        updateMessageNavigationButtons();
      }

      function adjustMessagePaneLayout(number) {
        const container = document.getElementById("card-container");
        let cols, rows;

        if (number > 5) {
          cols = 1;
          rows = Math.ceil(number);
        } else {
          cols = 1;
          rows = number;
        }

        container.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
        container.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
      }

      function setLayout(layout) {
        currentLayout = layout;
        if (layout === "first") {
          setCardNumber(cardsPerPage || 6); // Default to 6 if cardsPerPage is not set
        } else if (layout === "second") {
          setMessageCardNumber(messageCardsPerPage || 5); // Default to 5 if messageCardsPerPage is not set
        }
      }

      // Initial call to set the default layout
      setLayout("first");
    </script>
  </body>
</html>
