<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Participant Grid</title>
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        overflow: hidden;
      }

      .participant {
        position: relative;
        width: 100%;
        padding-top: 56.25%; /* 16:9 Aspect Ratio */
        border: 2px solid #ccc;
        background: #f9f9f9;
        cursor: pointer;
      }

      .participant.active {
        border-color: yellow;
      }

      .participant .content {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .participant .name {
        position: absolute;
        bottom: 5px;
        left: 5px;
        background: rgba(0, 0, 0, 0.5);
        color: #fff;
        padding: 2px 5px;
        font-size: 12px;
      }

      .participant .mic {
        position: absolute;
        top: 5px;
        right: 5px;
        background: rgba(0, 0, 0, 0.5);
        color: #fff;
        padding: 2px 5px;
        font-size: 12px;
        cursor: pointer;
      }

      .participant.fullscreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        padding-top: 0;
        background: #fff;
        z-index: 1000;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid mt-4">
      <div id="participant-grid" class="row row-cols-4 g-2"></div>
      <div class="d-flex justify-content-center mt-4">
        <button
          id="prev-button"
          class="btn btn-primary me-2"
          onclick="navigate('prev')"
        >
          Prev
        </button>
        <button
          id="next-button"
          class="btn btn-primary ms-2"
          onclick="navigate('next')"
        >
          Next
        </button>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
      let participants = [];
      let currentPage = 0;
      const participantsPerPage = 16;
      const participantGrid = document.getElementById("participant-grid");

      // Dummy participant data
      for (let i = 1; i <= 30; i++) {
        participants.push({
          id: i,
          name: `Participant ${i}`,
          isSpeaking: false,
        });
      }

      function renderParticipants() {
        participantGrid.innerHTML = "";
        const start = currentPage * participantsPerPage;
        const end = start + participantsPerPage;
        const pageParticipants = participants.slice(start, end);

        pageParticipants.forEach((participant) => {
          const participantElement = document.createElement("div");
          participantElement.classList.add("col", "participant");
          participantElement.id = `participant-${participant.id}`;
          if (participant.isSpeaking) {
            participantElement.classList.add("active");
          }
          participantElement.innerHTML = `
      <div class="content">
        <div class="name">${participant.name}</div>
        <div class="mic" onclick="toggleMic(${participant.id}, event)">Mic</div>
      </div>
    `;
          participantElement.onclick = (event) =>
            toggleFullscreen(participant.id, event);
          participantGrid.appendChild(participantElement);
        });
      }

      function navigate(direction) {
        if (
          direction === "next" &&
          (currentPage + 1) * participantsPerPage < participants.length
        ) {
          currentPage++;
        } else if (direction === "prev" && currentPage > 0) {
          currentPage--;
        }
        renderParticipants();
      }

      function toggleMic(id, event) {
        event.stopPropagation();
        const participant = participants.find((p) => p.id === id);
        participant.isSpeaking = !participant.isSpeaking;
        renderParticipants();
      }

      function toggleFullscreen(id, event) {
        const participantElement = document.getElementById(`participant-${id}`);
        if (participantElement.classList.contains("fullscreen")) {
          participantElement.classList.remove("fullscreen");
        } else {
          document
            .querySelectorAll(".participant")
            .forEach((el) => el.classList.remove("fullscreen"));
          participantElement.classList.add("fullscreen");
        }
      }

      renderParticipants();
    </script>
  </body>
</html>
